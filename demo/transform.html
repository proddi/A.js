<!DOCTYPE html>
<html>
    <head>
    <meta charset="UTF-8">
    <script src="../A.js"></script>
    <script src="js/T.js"></script>
    <style>
        .box {
            border: 1px solid #888;
            width: 100px;
            height: 100px;
            background-color: white;
            text-align: center;
            line-height: 3em;
            margin: 1em;
        }
    </style>
    </head>

  <body>
    <div id="box" class="box">Schrödingers cat</div>
    <script>
            A('#box')
                .animate({ transform: { x: 50, y: 20 }, backgroundColor: "black", color: "white" })
                .sleep(800)
                .animate({ transform: { x: 60, y: 20, scale: 1.5 }, backgroundColor: "blue" })
                .animate({ transform: { scale: 1.3, rotate: 30 }, backgroundColor: "green", color: "black" })
                .sleep(200)
                .animate({ transform: { x: 0, y: 0, scale: 1, rotate: 360 }, backgroundColor: "white" })
                ;
    </script>

    <div id="template" class="box" style="position:absolute; opacity:0">Schrödingers cat</div>
    <script>
        var BOX = T('#template');

        for (var i=0; i<10; i++) {
            var clone = BOX.clone().appendTo(BOX.parent);

            A(clone.node)
                .sleep(i*150)
                .animate({ transform: { x: 30+i*120, y: 50 }, backgroundColor: "black", color: "white", opacity: 1 })
                .sleep(800)
                .animate({ transform: { rotate: -20 } }, { duration: 300 })
                .animate({ transform: { x: 30+i*120, y: 150, scale: 1, rotate: 160 }, backgroundColor: "white", opacity: 0 })
                .then(clone.remove.bind(clone))
                ;
        }
    </script>

    <Button id="button" style="margin-left: 400px">Hover me...</div>
    <script>
        var button = document.querySelector('#button');
        var a = A(button);
        button.addEventListener("mouseover", function() {
            a.animate({ transform: { rotate: -10, scale: 1.3 }}, { duration: 200 });
        });
        button.addEventListener("mouseout", function() {
            a.animate({ transform: { rotate: 0, scale: 1 }}, { duration: 200 });
        });
    </script>

  </body>
</html>
